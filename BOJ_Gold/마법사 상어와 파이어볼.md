# **ë§ˆë²•ì‚¬ ìƒì–´ì™€ íŒŒì´ì–´ë³¼**
### ğŸ“Œ [BOJ G4 20056 ë§ˆë²•ì‚¬ ìƒì–´ì™€ íŒŒì´ì–´ë³¼](https://www.acmicpc.net/problem/20056)
-------------
### **âœ” í’€ì´ ê³¼ì • / í•™ìŠµí•œ ë‚´ìš©**
- ì‹œê°„ì´ˆê³¼ ë•Œë¬¸ì— ì• ë¨¹ì—ˆë˜ ë¬¸ì œë‹¤.

- ì²˜ìŒì—ëŠ” ë°˜ë³µë¬¸ì—ì„œ ë°”ë¡œ ë¦¬ìŠ¤íŠ¸ì˜ ê°ì²´ë¥¼ ì œê±°í•˜ë ¤ë‹ˆ ë™ì‹œì„± ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.
ê·¸ë˜ì„œ ë¦¬ìŠ¤íŠ¸ì˜ íŒŒì´ì–´ë³¼ì„ 4ê°œë¡œ ë‚˜ëˆ„ê¸° ì „ì— í¸í•˜ê²Œ ì‚­ì œí•˜ê¸° ìœ„í•´ ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê³  ì‚­ì œí•  ê°ì²´ë“¤ì„ ì €ì¥í–ˆë‹¤.
ê·¸ ë‹¤ìŒ ë¦¬ìŠ¤íŠ¸.removeAll(ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸)ë¡œ ëª¨ë“  ê°ì²´ë“¤ì„ ì‚­ì œí–ˆëŠ”ë° ì´ ê³¼ì •ì—ì„œë„ ì—­ì‹œ ì‹œê°„ì´ ë§ì´ ì†Œìš”ëë˜ ëª¨ì–‘ì´ë‹¤.

- ê·¸ë˜ì„œ ì´ ë¶€ë¶„ì„ ì¸ë±ìŠ¤ì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°”ê¿”ì„œ í’€ì´ ì™„ë£Œí–ˆë‹¤.
-------------
### **ì½”ë“œ**

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

public class ë§ˆë²•ì‚¬ìƒì–´ì™€íŒŒì´ì–´ë³¼ {
    private static final int[] dr = {-1, -1, 0, 1, 1, 1, 0, -1};
    private static final int[] dc = {0, 1, 1, 1, 0, -1, -1, -1};

    private static class Fireball {
        private int r;
        private int c;
        private int m;
        private int s;
        private int d;

        public Fireball(int r, int c, int m, int s, int d) {
            this.r = r;
            this.c = c;
            this.m = m;
            this.s = s;
            this.d = d;
        }

        public int getR() {
            return r;
        }

        public int getC() {
            return c;
        }

        public int getM() {
            return m;
        }

        public int getS() {
            return s;
        }

        public int getD() {
            return d;
        }

        // íŒŒì´ì–´ë³¼ ì´ë™
        public void move(int[][] map) {
            int nextR = r + dr[d] * s;
            int nextC = c + dc[d] * s;
            r = ((nextR + map.length) % map.length + map.length) % map.length;
            c = ((nextC + map.length) % map.length + map.length) % map.length;
        }

        @Override
        public String toString() {
            return "Fireball{" +
                    "r=" + r +
                    ", c=" + c +
                    ", m=" + m +
                    ", s=" + s +
                    ", d=" + d +
                    '}';
        }
    }

    // íŒŒì´ì–´ë³¼ ì´ë™í•˜ëŠ” ë©”ì†Œë“œ
    private static void moveFireball(List<Fireball> list, int[][] map) {
        for (Fireball fireball : list) {
            map[fireball.getR()][fireball.getC()]--; // í˜„ì¬ìœ„ì¹˜ ê°œìˆ˜ ê°ì†Œ
            fireball.move(map); // ì´ë™
            map[fireball.getR()][fireball.getC()]++; // ì´ë™ í›„ ìœ„ì¹˜ ê°œìˆ˜ ì¦ê°€
        }
    }

    // íŒŒì´ì–´ë³¼ ë‚˜ëˆ„ëŠ” ë©”ì†Œë“œ
    private static void divideFireball(int N, int[][] map, List<Fireball> list) {
        for (int r = 0; r < N; r++) {
            for (int c = 0; c < N; c++) {
                if (map[r][c] >= 2) {
                    int m = 0;
                    int s = 0;
                    boolean evenCheck = false; // ì§ìˆ˜ ì²´í¬
                    boolean oddCheck = false; // í™€ìˆ˜ ì²´í¬

                    int idx = 0;
                    while (idx < list.size()) {
                        Fireball fireball = list.get(idx);

                        // í•´ë‹¹ ìœ„ì¹˜ì˜ íŒŒì´ì–´ë³¼ì¸ ê²½ìš° ì§ˆëŸ‰, ì†ë„ ê³„ì‚°, ë°©í–¥ í™€/ì§ ì²´í¬
                        if (fireball.getR() == r && fireball.getC() == c) {
                            m += fireball.getM();
                            s += fireball.getS();
                            if (fireball.getD() % 2 == 0) {
                                evenCheck = true;
                            } else {
                                oddCheck = true;
                            }

                            list.remove(idx);
                        } else {
                            idx++;
                        }
                    }

                    m /= 5;
                    // ì´ ì§ˆëŸ‰ì—ì„œ 5ë¥¼ ë‚˜ëˆ´ì„ ë•Œ 0ì´ ë˜ë©´ ì†Œë©¸. í˜„ì¬ ìœ„ì¹˜ ê°œìˆ˜ë„ 0ìœ¼ë¡œ ì´ˆê¸°í™”
                    if (m == 0) {
                        map[r][c] = 0;
                        continue;
                    }

                    s /= map[r][c];
                    int d = !evenCheck || !oddCheck ? 0 : 1;
                    for (int i = 0; i < 4; i++, d += 2) {
                        list.add(new Fireball(r, c, m, s, d));
                    }

                    // 4ê°œë¡œ ë‚˜ëˆ ì¡Œìœ¼ë‹ˆ í˜„ì¬ ìœ„ì¹˜ì˜ íŒŒì´ì–´ë³¼ ê°œìˆ˜ê°’ ì¦ê°€
                    map[r][c] = 4;
                }
            }
        }
    }

    // ë‚¨ì•„ìˆëŠ” íŒŒì´ì–´ë³¼ì˜ ì§ˆëŸ‰ êµ¬í•˜ëŠ” ë©”ì†Œë“œ
    private static int getRemainM(List<Fireball> list) {
        int remainM = 0;
        for (Fireball fireball : list) {
            remainM += fireball.getM();
        }

        return remainM;
    }

    public static void main(String[] args) throws IOException {
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st = new StringTokenizer(in.readLine());
        int N = Integer.parseInt(st.nextToken());
        int M = Integer.parseInt(st.nextToken());
        int K = Integer.parseInt(st.nextToken());
        int[][] map = new int[N][N]; // íŒŒì´ì–´ë³¼ ê°œìˆ˜ ê´€ë¦¬ìš© ë°°ì—´
        List<Fireball> list = new ArrayList<>(); // íŒŒì´ì–´ë³¼ ì €ì¥ ë¦¬ìŠ¤íŠ¸
        for (int i = 0; i < M; i++) {
            st = new StringTokenizer(in.readLine());
            int r = Integer.parseInt(st.nextToken()) - 1;
            int c = Integer.parseInt(st.nextToken()) - 1;
            int m = Integer.parseInt(st.nextToken());
            int s = Integer.parseInt(st.nextToken());
            int d = Integer.parseInt(st.nextToken());

            list.add(new Fireball(r, c, m, s, d));
            map[r][c]++;
        }

        while (K-- > 0) {
            // íŒŒì´ì–´ë³¼ ì´ë™
            moveFireball(list, map);
            // íŒŒì´ì–´ë³¼ ë‚˜ëˆ„ê¸° (2ê°œ ì´ìƒì¸ ê²½ìš°ë§Œ)
            divideFireball(N, map, list);
        }

        System.out.println(getRemainM(list));
    }
}
```